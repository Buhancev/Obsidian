2022-10-0221:07
Tags: #Java #JavaCoreAdvanced #StreamAPI 

__
# Свертка и вычисление сводных показателей
Как знаем, коллекторы (параметры метода collect объекта Stream) обычно используются там, где нужно преобразовать элементы потока данных в коллекцию. Но, вообще говоря, их можно задействовать при любой группировке всех элементов потока данных в единый результат. Тип результата может быть любым: от отдельного целочисленного значения (скажем, сумма каллорий всего меню) до сложнейшего многоуровневого ассоциативного массива (соответсвующего какой-то древовидной структуре). Рассмотрим оба этих типа результатов.

В качестве первого примера подсчитаем количество блюд в меню с помощью коллектора, возвращаемого фабричным методом counting
```java
long howManyDishes = menu.stream().collect(Collectors.counting());
```
Конечно, это можно сделать более простым способом
```java
long howManyDishes = menu.stream().count();
```
Но! Коллектор counting может оказаться более полезен в сочетании с другими коллекторами, как мы поймем далее.

Все статические фабричные методы класса Collector находятся в *java.util.Collectors.*

### Поиск максимума и минимума в потоке данных
Пусть нужно найти самое калорийное блюда в меню. 

Для вычисления максимума и минимума в потоке данных можно использовать два коллектора - *Collectors.maxBy* и *Collectors.minBy*. Они принимают в качестве параметра аргумент объекта Comparator для сравнения элементов в потоке данных. 

Создадим Comparator для сравнения блюд на основе их калорийности и передадим его
```java
Comparator<Dish> dishCaloriesComparator = 
	Comparator.comparingInt(Dish::getCalories);

Optional<Dish> mostCaloriesDish =
	menu.stream()
		.collect(maxBy(dishCaloriesComparator));
```
Optional здесь нужен для того, если menu пусто, то возвращать нечего! 

Еще одна часто встречающаяся операция свертки, возвращающая одно значение, - операция суммирования числового поля объекта потока данных. Или, скажем, усреднение его значений. Подобные операции называются *операциями вычисления сводных показателей* (summarization).
__
### Zero-Links
- [[Встроенные коллекторы]]

__
### Links
- [[Вычисление сводных показателей с помощью коллекторов]]
- [[Объединение строк]]
- [[Обобщенные вычисления сводных показателей с помощью свертки]]
