2023-01-2622:54
Tags: #Java #SpringFramework #SpringBoot 

__
# Настройка с помощью профилей

В разных окружения некоторые настройки приложения могут отличаться. Например, параметры соединения с БД, скорее всег, в окружении разработки будут одними, в тестировании третьими и т.д.

Один из способов обеспечить уникальные настройки в разных окружения - задавать значения конфигурационных свойтв в переменных окружения, а не в файлах application. (properties)/(yml)

Например, во время разработки можно использовать in-memory БД H2 с автоматической настройкой, а в промышленном окружении задавать настройки БД в переменных окружения
```bash

% export SPRING_DATASOURCE_URL=jdbc:mysql://localhost/tacocloud 
% export SPRING_DATASOURCE_USERNAME=tacouser 
% export SPRING_DATASOURCE_PASSWORD=tacopassword
```
Cпособ рабочий, но громоздкий, когда требуется определить больше одного-двух конфигурационных свойств в перменных окружения. Также нет возможности наблюдения за переменных окружения или быстрого отката в случае ошибки.

Поэтому лучше использовать **профили Spring.** Профили - разновидность условной конфигурации, в которой разные bean-компоненты и конфигурационные класса и свойства применяются или игнорируются в зависимости от профиля, действующего во время выполнения.

Например, во время разработки хотим использовать БД H2 и установить уровень журналирования DEBUG, а в производственном окружении использовать БД MySQL и уровень журналирования WARN. На этапе разработки можно просто не определять никаких свойств источника данных и полузчить автоматически настроенную БД H2. А уровень журналирования можно установить  application.yml через свойство **logging.level.tacos**:
```java
logging:
	level:
		tacos: DEBUG
```
Это то что нужно для разработки. Но если развернуть это приложение в промышленном окружении без каких либо изменений, то уровень журналирования так и останется DEBUG и будет использоваться БД H2. 

Чтобы изменить ситуацию, нужно определить профиль со свойствами, подходящими для промышленного окружения.

__
### Zero-Links
- [[Работа с конфигурацией]]

__
### Links
- [[Определение свойств профиля]]
- [[Активация профилей]]
- [[Условное создание bean-компонентов для профилей]]

