2022-10-2623:43
Tags: #Java #JavaCoreAdvanced #DesignPatterns 

__
# Пример реализации паттерна проектирования Шаблонный метод (Template method) и его рефакторинг

Пусть нужно написать простое приложение для онлайн-банкинга. Пользователи обычно вводят идентификатор клиента; приложение извлекает информацию о клиенте из БД банка и выполняет какое-то действие, чтобы осчастливить клиента. Различные приложения онлайн-банкинга для разных подразделений могут осчастливить пользователя по-разному. (например, добавить бонусы на его счет или уменьшить поток документаоборота с ним). 

Приложение для онлайн-банкинга можно представить следующим образом c помощью абстрактного класса
```java
abstract class OnlineBanking {
	public void processCustomer(int id) {
		Customer c = Database.getCustomerWithId(id);
		makeCustomerHappy(c);
	}
	abstract void makeCustomerHappy(Customer c);
}
```
Метод processCustomer включает "скелет" алгоритма онлайн-банкинга: извлечь данные о клиенте по заданному идентификатору и осчасливить клиента. Теперь различные подразделения могут использовать различные реализации метода makeCustomerHappy благодаря наследованию класса OnlineBanking.

## Использование лямбда-выражения
Подключаемые компоненты алгоритма в этом случае ожно выразить в виде лямбда-выражений или ссылок на методы.

Добавим в метод processCustomer второй аргумент Consumer(Customer)
```java
public void processCustomer(int id, Consumer<Customer> makeCustomerHappy {
		Customer c = Database.getCustomerWithId(id);
		makeCustomerHappy.accept(c);
	}
```
Теперь можно напрямую подключать различные варианты поведения, передавая лямбда-выражение, без наследования класса OnlineBanking (класс нужно переписать, чтобы он был не абстрактный)
```java
new OnlineBankingLambda().processCustomer(1337, (Customer c) -> 
										 System.out.println("Hello " + c.getName()));
```

Данный пример показывает, как лямбда-выражения помогают устранять присущий паттернам проектирования стереотипный код.
__
### Zero-Links
- [[Паттерн проектирования Шаблонный метод (Template method)]]

__
### Links
- 

