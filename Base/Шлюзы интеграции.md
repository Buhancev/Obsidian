2023-02-1723:08
Tags: #Java #SpringFramework #SpringBoot #SpringIntegraton


__
# Шлюзы интеграции

Шлюз - средство, с помощью которого приложение сможет отправить поток интеграции и при необходимости получить ответ - результат работы потока. Шлюзы Spring Integration реализуются как интерфейсы, которые приложение может вызывать для отправки сообщений в поток интеграции
![[Pasted image 20230217231230.png]]
Ранее в этой теме был шлюз сообщений в виде *FileWriterGateWay*. 
**FileWriterGateWay** - однонаправленный шлюз с методом, принимающим строку для записи в файл и возвращающий void. Однако без труда можно написать ДВУнаправленный шлюз. 

***Реализуя интерфейс шлюза, убедитесь, что метод возвращает некоторое значения для публикации в потоке интеграции***.

Например, напишем шлюз, который служит входом в простой поток интеграции, принимающий строку и преобразующий её в верхний регистр:
```java
@Component
@MessagingGateway(defaultRequestChannel="inChannel",
				 defaultReplyChannel="outChannel")
public interface UpperCaseGateway {
	String uppercase(String in);
}
```
Самое "замечательное" в этом интерфейсе - его не нужно реализовывать. Spring Integration автоматически создаст реализацию во время выполнения, которая отправляет и получает данные по указанным каналам.

Когда вызывает метод **uppercase()**, заданная строка передается в канал *inChannel* в потоке интеграции. Независимо от особенностей в определения потока, когда данные поступают в канал *outChannel*, они возвращаются из метода *uppercase()*.

Преобразование в верхний регистр - упрощенный пример потока интеграции с единственным шагом, на котором происходит преобразование строки в верхний регистр. 

Такой же пример в стиле Java DSL:
```java
@Bean
public IntegrationFlow uppercaseFlow() {
	return IntegrationFlows
		.from("inChannel")
		.<String, String> transform(s -> s.toUpperCase())
		.channel("outChannel")
		.get();
}
```
Здесь поток начинает работу с поступления данных в канал *inChannel*. Затем содержимое обрабатывается преобразователем, который определен лямбда-выражением. После этого это сообщение публикуется в канал *outChannel*, который мы объявили в качестве канала ответа для интерфейса UppetCaseGateWay. 



__
### Zero-Links
- [[Ландшафт Spring Integration]]

__
### Links
- 

