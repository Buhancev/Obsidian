2023-02-2519:58
Tags: #Java #SpringFramework #SpringBoot #Reactor

__
# Создание из объектов. Reactor.

Если есть один или несколько объектов, из которых нужно создать экземпляр **Mono** или **Flux**, то можно вызвать статический метод **just()**, возвращающий тип, ланные в котором будут представлены праклидными объектами.

Например, следующий тестовыйметод создает **Flux из пяти объектов типа String**:
```java
@Test
public void createAFlux_just() {
	Flux<String> fruitFlux = Flux
		.just("apple", "orange", "grape", "banan", "strawberry");
}
```
Этот метод создаст экземпляр Flux, но у него нет подписчиков. Без подписчиков данные никуда не будут передаваться. 

Подписка на реактивный типа и есть процедура включения потока данных.
Чтобы добавить подписчика, можно вызвать метод **subscribe()**:
```java
fruitFlux.subscribe(
	f -> System.out.println("Here's some fruit: " + f)
);
```
Лямда-выражение на самом деле является экземпляром **java.util.Consumer**, на основе котороого Reactive Stream создаст подписчика Subscriber. Сразу после вызова subscribe() по конвейеру начинают поступать данные. В этом примере нет промежуточной операции, поэтому данные идут напрямую от Flux к подписчику Subscriber.

Вывод в консоль хороший способ для того чтобы видеть, как дейсвует реактивный тип. Но **лучше для тестирования испольховать StepVerifier**. Он подписывается на реактивный тип **Flux** или **Mono**, а затем применяет проверки к данным, когда они проходят через поток, и в заключение убеждается, что поток завершился должным образом.

Например, чтобы убедиться, что данные проходят через fruitFlux, можно написать такой тест:
```java
StepVerifier.create(fruitFlux)
	.expectNext("apple")
	.expectNext("orange")
	.expectNext("grape")
	.expectNext("banana")
	.expectNext("strawberry")
	.verifyComplete();
```
В этом случае **StepVerifier** подписывается на Flux, а затем проверяет каждый элемент на соответсвие ожидаемому имени фрукта. Наконец, он проверяет что поток завершает работу как должно.

__
### Zero-Links
- [[Использование распространенных реактивных операций]]

__
### Links
- 

