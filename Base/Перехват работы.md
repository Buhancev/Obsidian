2022-10-1521:58
Tags: #

__
# Перехват работы
![[алгоритм перехвата работы, используемый фреймворком Fork-Join.png]]
Есть ли смысл делить задачу на тысячи мелких подзадач, если исполняемых процессоров, положим, всего 4? Какой смысл делить 1 задачу на 10-100-1000, если можно разбить на число процессоров? 

Однако в общем случае ветвление задач на большое число более мелких - выиграшная стратегия, так как вычислительная нагрузка будет перехватываться. У каждого потока есть двусвязная очекредь назначенных ему задач, и по завершении очередной он извлекает из головы очереди следующую и выполняет её. Так как потоки могут рабоать не равномерно(не идеально) и один может отработать свои задачи быстрее, чем остальные, в результате чего его очередь опустее, в то время как в остальных потока в очередях еще не мало задач. В подобном случае, вместо того чтобы простаивать, этот поток выполнения случайным образом выбирает очередь одного из других и "перехватывает" у него задачу, находящуюся в конце очереди. Этот процесс продолжается вплоть до завершения всех задач и опустения всех очередений. 

Именно поэтому большое число мелких задач помогает лучше распределить нагрузку между потока-исполнителями.

В общем случае такой алгоритм работает для распределения и балансировки задач между потока-исполнителями в пуле.


__
### Zero-Links
- [[Рекомендуемые практики применения фреймворка ветвления-объединения]]
- [[00 Фреймворк ветвления-объединения]]

__
### Links
- 

