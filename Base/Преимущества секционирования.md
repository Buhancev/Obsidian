2022-10-0416:22
Tags: #Java #JavaCoreAdvanced #StreamAPI 

__
# Преимущества секционирования
Преимущуество секционирование на фильтрацией в том, что секционирование сохраняет оба списка элементов потока данных, применение к которым секционируещей функции дает true и false. 

В предыдущем примере получить список невегетарианских блюд можно путем извлечения значений ключа false ассоциативного массива partitionedMenu, вместо того чтобы задействовать две отдельные операции фильтрации. 

Также, у фабричного метода partitioningBy есть перегруженная версия, в которую можно передать второй коллектор
```java
Map<Boolean, Map<Dish.Type, List<Dish>> vegetarianDishesByType = 
	menu.stream().collect(
		partitioningBy(Dish::isVegetarian),//секционирующая функция
			groupingBy(Dish::getType))); //второй коллектор
```
В результате получаем двухуровневый ассоциативный массив
```java
{false={FISH=[prawns, salmon], MEAT=[pork, beef, chicken]},  
true={OTHER=[french fries, rice, season fruit, pizza]}}
```
Группировка блюд происходит отдельно для каждого из двух подпотоков вегетаринских и не вегетарианских блюд, полученных после секционирования. В результате получили двухуровневый ассоциативный массив.

Пример, можно повторно использоваться вышеприведенный код и найти наиболее калорийные блюда среди вегетаринских и невегетарианских
```java
Map<Boolean, Dish> mostCaloricPartitionedByVegetarian = 
	menu.stream().collect(
		partitioningBy(Dish::isVegetarian),
			collectingAndThen(maxBy(comparingInt(Dish::getCalories)),
				Optional::get)));
```
В результате получаем
```java
{false=pork, true=pizza}
```
Стоит отметить, что возвращаемая partitioning реализация ассоциативного массива более сжата и эффективна, ведь она содержит всего два ключа: true и false. На самом деле внутренняя реализация представляет собой специализированный ассоциативный массив с двумя полями. Аналогии между groupingBy и partitioningBy на этом не заканчиваются (можно производить многоуровневое сканирование аналогично многоуровневой группировке)


__
### Zero-Links
- [[Секционирование]]

__
### Links
- [[Секционирование чисел на простые и составные]]

