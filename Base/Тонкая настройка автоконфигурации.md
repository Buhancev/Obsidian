2023-01-2001:51
Tags: #Java #SpringFramework #SpringBoot

__
# Тонкая настройка автоконфигурации

### Типа конфигурационных свойств

- **связывание компонентов** - конфигурация, объявляющая прикладные компоненты, которые должны быть созданы в контексте приложения Spring, и определяющая порядок их внедрения друг в друга
- **внедрение свойств** - конфигурация, устанавливающая значения свойтсв bean-компонентов в контексте приложения Spring

В Spring XML и Java эти два типа часто явно объявляются в одном и том же месте.
Аннотация **@Bean** определяет методы, создающие экземпляры компонентов и устанавливающие их свойства. 

Например, следующий метод объявляется DataSource для встроенной БД H2:
```java
@Bean
public DataSource dataSource() {
	return new EmbeddedDatabaseBuilder()
		.setType(H2)
		.addScript("taco_schema.sql")
		.addScripts("user_data.sql", "ingredient_data.sql")
		.build();
}
```
Именно так можно настроить bean-компонент DataSource, если не использовать Spring Boot, **но механизм автоконфигурации делает этот метод совершенно ненужным.**

Если зависимость H2 доступна в пути поиска классов (classpath), то Spring Boot автоматически создаст в контексте приложения Spring соответствующий bean-компонент DataSource, который применит сценарии SQL schema.sql и data.sql

**Как быть, если сценарии SQL хранятся в файлах с другими именами ? А что, если нужно применить больше двух сценариев SQL?** Здесь то и нужны конфигурационные свойства! 

__
### Zero-Links
- [[Работа с конфигурацией]] 

__
### Links
- 

