2022-09-2215:50
Tags: #Java #JavaCoreAdvanced #StreamAPI 

__
# Срез потока данных
Существую операции для эффективного выбора или отбрасывания элементов с помощью предиката, пропуска нескольких первых элементов потока или усечения потока до заданного размера.

#### Срез с помощью предиката
В Java 9 появилось два новых метода, полезных для выбора элементов потока с хорошей производительностью: *takeWhile* и *dropWhile*.

##### Метод takeWhile
Допустим, есть список блюд
```java
List<Dish> specialMenu = Arrays.asList(  
new Dish("seasonal fruit", true, 120, Dish.Type.OTHER),  
new Dish("prawns", false, 300, Dish.Type.FISH),  
new Dish("rice", true, 350, Dish.Type.OTHER),  
new Dish("chicken", false, 400, Dish.Type.MEAT),  
new Dish("french fries", true, 530, Dish.Type.OTHER));
```
Как видно, список уже отсортирован по числу каллорий. Недостаток операции *filter* в том, что она требует прохода в цикле по всему потоку данных с применением предиката ко всем элементам. Вместо этого можно прекратить работу сразу же после обнаружения блюда, содержащего 320 каллорий или более. В случае небольшого списока это может показать не таким важным, но при работе с большим потоком это окажется весьма полезно. Именно для этого и нужна операция *takeWhile*. Она позволяет выполнить срез любого потока данных(даже бесконечного) с помощью предиката. И, к счастью, она прекращает работу сразу же по обнаружении неподходящего элемента:
```java
List<Dish> slicedMenu1 
			= specialMenu.stream()
						 .takeWhile(dish -> dish.getCalories() < 320)
						 .collect(toList());
```

##### Метод dropWhile
А как получить остальные элементы? Как выбрать блюда, содержащие более 320 каллорий? Для этого можно воспользоваться операцией *dropWhile*:
```java
List<Dish> slicedMenu2 
			= specialMenu.stream()
						 .dropWhile(dish -> dish.getCalories() < 320)
						 .collect(toList());
```
Операция *dropWhile* служит дополнением к операции *takeWhile*. Она отбрасывает первые элементы, для которых предикат ложен. Как только результаты вычисления становятся истинными, она прекращает работу и возвращает все оставшиеся элементы, причем работает даже в том случае, если число оставшихся элементов БЕСКОНЕЧНО!
__
### Zero-Links
- [[Работа с потоками данных]]



